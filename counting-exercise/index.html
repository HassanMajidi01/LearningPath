<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§Ø±Ø´</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Tahoma', 'Helvetica Neue', Arial, sans-serif;
            /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø³Ú©Ø±ÙˆÙ„ Ø§ÙÙ‚ÛŒ Ù†Ø§Ø®ÙˆØ§Ø³ØªÙ‡ */
            overflow-x: hidden;
        }
        /* Header */
header {
  background-color: #1d2d50;
  color: #fff;
  padding: 20px 0;
  border-bottom: 3px solid #fcbf49;
}

header h1 {
  text-align: center;
  margin-bottom: 10px;
  font-size: 2.5rem;
}

/* Ù…Ù†Ùˆ */
nav ul {
  list-style: none;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
}

nav ul li {
  margin: 0 15px;
}

nav ul li a {
  color: #fff;
  text-decoration: none;
  padding: 10px 20px;
  transition: background-color 0.3s ease, transform 0.3s ease;
  border-radius: 5px;
  font-size: 1rem;
}

nav ul li a:hover {
  background-color: #fcbf49;
  transform: translateY(-3px);
}
        .exercise-container, .exercise-container-2, .exercise-container-3 {
            max-width: 600px;
            margin: 20px auto; /* Ú©Ø§Ù‡Ø´ Ù…Ø§Ø±Ø¬ÛŒÙ† Ø¹Ù…ÙˆØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
            padding: 15px; /* Ú©Ø§Ù‡Ø´ Ù¾Ø¯ÛŒÙ†Ú¯ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background-color: #f9fafb;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .exercise-container, .exercise-container-2, .exercise-container-3 {
                margin: 30px auto;
                padding: 20px;
            }
        }

        .item-number-pair-container {
            display: flex;
            flex-direction: column; 
            align-items: center;
            margin: 3px; /* Ú©Ø§Ù‡Ø´ Ù…Ø§Ø±Ø¬ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ø¬Ø§ Ø´Ø¯Ù† Ø¨Ù‡ØªØ± */
        }
        .item-image {
            font-size: 1.8rem; /* Ú©Ù…ÛŒ Ú©ÙˆÚ†Ú©ØªØ± Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
            width: 35px; /* Ú©Ù…ÛŒ Ú©ÙˆÚ†Ú©ØªØ± Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
            height: 35px; /* Ú©Ù…ÛŒ Ú©ÙˆÚ†Ú©ØªØ± Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            background-color: #f0f0f0;
            border-radius: 4px;
            margin-bottom: 3px;
            margin-left: 2px; 
            margin-right: 2px;
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .item-image {
                font-size: 2rem;
                width: 40px;
                height: 40px;
                margin-bottom: 4px;
                margin-left: 3px;
                margin-right: 3px;
            }
        }

        .number-box { 
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 35px; 
            height: 35px; 
            font-size: 1rem; 
            border: 1px solid transparent; 
            border-radius: 4px;
            box-sizing: border-box;
            text-align: center;
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .number-box {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
            }
        }
        .number-box-input { 
            width: 35px;
            height: 35px;
            text-align: center;
            border: 1px solid #cbd5e1;
            border-radius: 4px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .number-box-input {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
            }
        }


        .choice-label {
            display: flex;
            align-items: center;
            padding: 8px; /* Ú©Ø§Ù‡Ø´ Ù¾Ø¯ÛŒÙ†Ú¯ */
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            margin-bottom: 6px; /* Ú©Ø§Ù‡Ø´ Ù…Ø§Ø±Ø¬ÛŒÙ† */
            cursor: pointer;
            background-color: white;
            transition: background-color 0.2s;
            font-size: 0.9rem; /* Ú©Ø§Ù‡Ø´ ÙÙˆÙ†Øª Ú¯Ø²ÛŒÙ†Ù‡ Ù‡Ø§ */
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .choice-label {
                padding: 10px;
                margin-bottom: 8px;
                font-size: 1rem;
            }
        }
        .choice-label input[type="radio"] {
            margin-left: 8px; /* Ú©Ø§Ù‡Ø´ Ù…Ø§Ø±Ø¬ÛŒÙ† */
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .choice-label input[type="radio"] {
                margin-left: 10px;
            }
        }

        .choice-text-number-sequence {
            direction: ltr;
            unicode-bidi: bidi-override;
        }
        .button-container {
            margin-top: 15px; /* Ú©Ø§Ù‡Ø´ Ù…Ø§Ø±Ø¬ÛŒÙ† */
            display: flex;
            flex-direction: column; /* Ø¯Ú©Ù…Ù‡ Ù‡Ø§ Ø²ÛŒØ± Ù‡Ù… Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ */
            gap: 8px; 
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .button-container {
                flex-direction: row; /* Ø¯Ú©Ù…Ù‡ Ù‡Ø§ Ú©Ù†Ø§Ø± Ù‡Ù… Ø¯Ø± ØµÙØ­Ø§Øª Ø¨Ø²Ø±Ú¯ØªØ± */
                justify-content: space-between;
                gap: 10px; 
            }
        }
        .button {
            padding: 10px 12px; 
            border-radius: 6px;
            font-size: 0.9rem; 
            cursor: pointer;
            transition: background-color 0.2s;
            border: none;
            width: 100%; /* Ø¯Ú©Ù…Ù‡ Ù‡Ø§ ØªÙ…Ø§Ù… Ø¹Ø±Ø¶ Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ */
            text-align: center;
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .button {
                padding: 10px 15px;
                font-size: 0.95rem;
                flex-grow: 1; /* ÙÙ‚Ø· Ø¯Ø± ØµÙØ­Ø§Øª Ø¨Ø²Ø±Ú¯ØªØ± ÙØ¶Ø§ÛŒ Ù…Ø³Ø§ÙˆÛŒ Ø¨Ú¯ÛŒØ±Ù†Ø¯ */
                width: auto; /* Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¹Ø±Ø¶ Ø®ÙˆØ¯Ú©Ø§Ø± */
            }
        }

        .check-button { background-color: #3b82f6; color: white; }
        .check-button:hover { background-color: #2563eb; }
        .next-button { background-color: #10b981; color: white; }
        .next-button:hover { background-color: #059669; }
        .skip-button { background-color: #6b7280; color: white; }
        .skip-button:hover { background-color: #4b5563; }
        .button:disabled { background-color: #9ca3af; cursor: not-allowed; }
        .related-video { background-color: #3b82f6; color: white; margin-top: 8px; }
        .related-video:hover { background-color: #e0e7ff; }
        
        .feedback {
            margin-top: 8px;
            padding: 6px;
            font-size: 0.85rem; /* Ú©Ø§Ù‡Ø´ ÙÙˆÙ†Øª Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ */
            border-radius: 4px;
            text-align: center;
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .feedback {
                margin-top: 10px;
                padding: 8px;
                font-size: 1rem;
            }
        }
        .feedback.correct { background-color: #d1fae5; color: #065f46; }
        .feedback.incorrect { background-color: #fee2e2; color: #991b1b; }

        .progress-bar-container {
            width: 100%;
            background-color: #e5e7eb;
            border-radius: 4px;
            margin-bottom: 10px; /* Ú©Ø§Ù‡Ø´ Ù…Ø§Ø±Ø¬ÛŒÙ† */
            overflow: hidden;
        }
        .progress-bar {
            height: 8px; /* Ú©Ø§Ù‡Ø´ Ø§Ø±ØªÙØ§Ø¹ */
            background-color: #3b82f6;
            width: 0%;
            transition: width 0.3s ease-in-out;
        }
         @media (min-width: 640px) { /* sm breakpoint */
             .progress-bar {
                height: 10px;
            }
            .progress-bar-container {
                margin-bottom: 15px;
            }
        }

        .items-display-area-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-start; 
            min-height: 80px; /* Ú©Ø§Ù‡Ø´ Ø§Ø±ØªÙØ§Ø¹ Ø­Ø¯Ø§Ù‚Ù„ÛŒ */
            margin-bottom: 10px;
            direction: ltr; 
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .items-display-area-container {
                min-height: 100px;
                margin-bottom: 15px;
            }
        }


        /* Ø§Ø³ØªØ§ÛŒÙ„ Ù‡Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ Ø¯ÙˆÙ… (Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† Ø¯Ø± Ø¬Ø¹Ø¨Ù‡) */
        .put-in-box-source-item-container {
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
        }
        .put-in-box-source-item { 
            font-size: 2.2rem; /* Ú©Ù…ÛŒ Ú©ÙˆÚ†Ú©ØªØ± */
            width: 50px; /* Ú©Ù…ÛŒ Ú©ÙˆÚ†Ú©ØªØ± */
            height: 50px; /* Ú©Ù…ÛŒ Ú©ÙˆÚ†Ú©ØªØ± */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: #e5e7eb;
            border: 2px dashed #9ca3af;
            border-radius: 8px;
            cursor: grab; 
            transition: background-color 0.2s;
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .put-in-box-source-item {
                font-size: 2.5rem;
                width: 60px;
                height: 60px;
            }
             .put-in-box-source-item-container {
                margin-bottom: 15px;
            }
        }
        .put-in-box-source-item:active { cursor: grabbing; }

        .put-in-box-target-box { 
            width: 100%;
            min-height: 120px; /* Ú©Ø§Ù‡Ø´ Ø§Ø±ØªÙØ§Ø¹ */
            background-color: #f3f4f6;
            border: 2px dashed #9ca3af; 
            border-radius: 8px;
            padding: 8px; /* Ú©Ø§Ù‡Ø´ Ù¾Ø¯ÛŒÙ†Ú¯ */
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
            gap: 6px; /* Ú©Ø§Ù‡Ø´ ÙØ§ØµÙ„Ù‡ */
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .put-in-box-target-box {
                min-height: 150px;
                padding: 10px;
                gap: 8px;
            }
        }
        .put-in-box-target-box.drag-over { background-color: #e0e7ff; border-color: #6366f1; }

        .put-in-box-placed-item { 
            font-size: 1.8rem; /* Ú©Ù…ÛŒ Ú©ÙˆÚ†Ú©ØªØ± */
            width: 40px; 
            height: 40px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: #d1d5db; 
            border: 1px solid #9ca3af;
            border-radius: 4px;
            cursor: pointer; 
            user-select: none; 
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .put-in-box-placed-item {
                font-size: 2rem;
                width: 45px;
                height: 45px;
            }
        }

        .section-title { 
            font-size: 1.25rem; /* Ú©Ø§Ù‡Ø´ ÙÙˆÙ†Øª Ø¹Ù†ÙˆØ§Ù† Ø¨Ø®Ø´ */
            font-weight: bold;
            color: #1f2937;
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e5e7eb;
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .section-title {
                font-size: 1.5rem;
                margin-bottom: 20px;
                padding-bottom: 10px;
            }
        }
        
        /* Ø¹Ù†ÙˆØ§Ù† Ø§ØµÙ„ÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ø¯Ø± Ù‡Ø± Ø¨Ø®Ø´ */
        .exercise-question-title {
            font-size: 1.1rem; /* Ú©Ø§Ù‡Ø´ ÙÙˆÙ†Øª Ø¹Ù†ÙˆØ§Ù† Ø³ÙˆØ§Ù„ */
            font-weight: 600; /* semibold */
            margin-bottom: 10px; /* Ú©Ø§Ù‡Ø´ Ù…Ø§Ø±Ø¬ÛŒÙ† */
            color: #1f2937; /* Tailwind gray-800 */
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .exercise-question-title {
                font-size: 1.25rem; /* Tailwind text-xl */
                 margin-bottom: 1rem; /* mb-4 */
            }
        }


        /* Ø§Ø³ØªØ§ÛŒÙ„ Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ Ø³ÙˆÙ… (Ù…Ø³Ø§Ø¦Ù„ Ø¯Ø§Ø³ØªØ§Ù†ÛŒ) */
        .story-problem-image-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .story-problem-image-container {
                margin-bottom: 15px;
            }
        }
        .story-problem-text { 
            font-size: 1rem; /* Ú©Ø§Ù‡Ø´ ÙÙˆÙ†Øª */
            color: #374151;
            margin-bottom: 6px;
            line-height: 1.5;
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .story-problem-text {
                font-size: 1.1rem;
                margin-bottom: 8px;
                line-height: 1.6;
            }
        }
        .story-problem-question { 
            font-size: 1.1rem; /* Ú©Ø§Ù‡Ø´ ÙÙˆÙ†Øª */
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 10px;
        }
         @media (min-width: 640px) { /* sm breakpoint */
            .story-problem-question {
                font-size: 1.2rem;
                margin-bottom: 15px;
            }
        }
        .story-problem-fill-blank { 
            display: inline-block;
            width: 40px; /* Ú©Ù…ÛŒ Ú©ÙˆÚ†Ú©ØªØ± */
            height: 25px; /* Ú©Ù…ÛŒ Ú©ÙˆÚ†Ú©ØªØ± */
            border-bottom: 2px solid #9ca3af;
            margin: 0 4px;
            vertical-align: bottom; 
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .story-problem-fill-blank {
                width: 50px;
                height: 30px;
                margin: 0 5px;
            }
        }

        .related-videos-section {
            margin: 30px auto 0;
            max-width: 260px;
        }
        .related-video-item {
            width: 100%;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            padding: 6px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .video-embed {
            width: 100%;
            aspect-ratio: 16/9;
            min-height: 120px;
        }
        .related-video-title {
            font-size: 0.9rem;
            margin-top: 4px;
            text-align: center;
        }

    </style>
</head>
<body class="bg-gray-100">
    <header>
    <div class="container">
      <h1>ØªÙ…Ø±ÛŒÙ† Ø´Ù…Ø§Ø±Ø´</h1>
      <nav>
        <ul>
          <li><a href="../index.html">ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a></li>
          <li><a href="../math.html">Ø±ÛŒØ§Ø¶ÛŒØ§Øª</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div id="exercise-container-2" class="exercise-container-2">
    <h2 class="section-title">Ø´Ù…Ø§Ø±Ø´ Ø¨Ø§ Ø§Ø¹Ø¯Ø§Ø¯ Ú©ÙˆÚ†Ú©</h2>
    <div id="pib-progress-text" class="text-sm text-gray-600 mb-2 text-center"></div>
    <div class="progress-bar-container">
        <div id="pib-progress-bar" class="progress-bar"></div>
    </div>
    <h3 id="pib-question-text" class="exercise-question-title text-center"></h3>
    <div id="pib-source-item-area" class="put-in-box-source-item-container"></div>
    <div id="pib-target-box-area" class="put-in-box-target-box" 
         ondragover="event.preventDefault()" 
         ondrop="handleDrop(event)"></div>
    <div id="pib-feedback-message" class="feedback" style="display: none;"></div>
    <div class="button-container">
        <button id="pib-check-button" class="button check-button">Ø¨Ø±Ø±Ø³ÛŒ</button>
        <button id="pib-skip-button" class="button skip-button">Ø±Ø¯ Ø´Ø¯Ù†</button>
        <button id="pib-next-button" class="button next-button" disabled>Ø¨Ø¹Ø¯ÛŒ</button>
    </div>

</div>
 <!-- Ø¨Ø®Ø´ ÙˆÛŒØ¯Ø¦ÙˆÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· -->
<div class="related-videos-section">
    <h2 class="section-title">ÙˆÛŒØ¯Ø¦ÙˆÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø·</h2>
    <div class="related-video-item">
        <div id="41357763279" class="video-embed">
            <script type="text/JavaScript" src="https://www.aparat.com/embed/maejlhi?data[rnddiv]=41357763279&data[responsive]=yes"></script>
        </div>
        <div class="related-video-title">Ø´Ù…Ø§Ø±Ø´ Ø¨Ø§ Ø§Ø¹Ø¯Ø§Ø¯ Ú©ÙˆÚ†Ú©</div>
    </div>
</div>
<!-- Ù¾Ø§ÛŒØ§Ù† Ø¨Ø®Ø´ ÙˆÛŒØ¯Ø¦ÙˆÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· -->


    <div id="exercise-container" class="exercise-container">
        <h2 class="section-title">Ø¨Ù‡ ØªØ±ØªÛŒØ¨ Ø¨Ø´Ù…Ø§Ø±ÛŒØ¯</h2>
        <div id="progress-text" class="text-sm text-gray-600 mb-2 text-center"></div>
        <div class="progress-bar-container">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
        <h3 id="question-text" class="exercise-question-title text-center"></h3>
        <div id="main-content-area" class="items-display-area-container"></div>
        <div id="feedback-message" class="feedback" style="display: none;"></div>
        <div class="button-container">
            <button id="check-button" class="button check-button">Ø¨Ø±Ø±Ø³ÛŒ</button>
            <button id="next-button" class="button next-button" disabled>Ø¨Ø¹Ø¯ÛŒ</button>
        </div>
        
    </div>

   
    <div id="exercise-container-3" class="exercise-container-3">
        <h2 class="section-title">ÛŒÚ© Ø¹Ø¯Ø¯ Ø¨ÛŒØ´ØªØ± ÛŒØ§ ÛŒÚ© Ø¹Ø¯Ø¯ Ú©Ù…ØªØ± Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ù†</h2>
        <div id="sp-progress-text" class="text-sm text-gray-600 mb-2 text-center"></div>
        <div class="progress-bar-container">
            <div id="sp-progress-bar" class="progress-bar"></div>
        </div>
        
        <div id="sp-story-text-area" class="text-center">
            </div>
        <div id="sp-question-area" class="text-center mt-3">
            </div>
        <div id="sp-choices-area" class="mt-4">
            </div>

        <div id="sp-feedback-message" class="feedback" style="display: none;"></div>
        <div class="button-container">
            <button id="sp-check-button" class="button check-button">Ø¨Ø±Ø±Ø³ÛŒ</button>
            <button id="sp-skip-button" class="button skip-button">Ø±Ø¯ Ø´Ø¯Ù†</button>
            <button id="sp-next-button" class="button next-button" disabled>Ø¨Ø¹Ø¯ÛŒ</button>
        </div>
    </div>


    
</div>


    <script>
        // --- SCRIPT Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ Ø§ÙˆÙ„ ---
        const exercises1 = [
            { id: 1, type: 'fill-in-the-blanks', questionTextFarsi: "Ú©ÙØ´Ø¯ÙˆØ²Ú©â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø´Ù…Ø§Ø±ÛŒØ¯. Ø§Ø¹Ø¯Ø§Ø¯ Ø¬Ø§ Ø§ÙØªØ§Ø¯Ù‡ Ø±Ø§ Ø¯Ø± Ú©Ø§Ø¯Ø±Ù‡Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.", items: { icon: 'ğŸ' }, sequence: [1, 2, null, null], correctAnswers: [3, 4] },
            { id: 2, type: 'multiple-choice', questionTextFarsi: "Ú†Ú¯ÙˆÙ†Ù‡ Ø¨Ù„ÙˆØ·â€ŒÙ‡Ø§ Ø±Ø§ Ù…ÛŒâ€ŒØ´Ù…Ø§Ø±ÛŒÙ…ØŸ", items: { icon: 'ğŸŒ°', count: 2 }, choices: [{ text: "Û±ØŒ Û³", isCorrect: false },{ text: "Û±ØŒ Û²", isCorrect: true }], correctAnswerText: "Û±ØŒ Û²" },
            { id: 3, type: 'fill-in-the-blanks', questionTextFarsi: "Ù†Ù‡Ù†Ú¯â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø´Ù…Ø§Ø±ÛŒØ¯. Ø§Ø¹Ø¯Ø§Ø¯ Ø¬Ø§ Ø§ÙØªØ§Ø¯Ù‡ Ø±Ø§ Ø¯Ø± Ú©Ø§Ø¯Ø±Ù‡Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.", items: { icon: 'ğŸ³' }, sequence: [1, null, 3, 4, null], correctAnswers: [2, 5]},
            { id: 4, type: 'multiple-choice', questionTextFarsi: "Ú†Ú¯ÙˆÙ†Ù‡ Ù…ÙˆØ²Ù‡Ø§ Ø±Ø§ Ù…ÛŒâ€ŒØ´Ù…Ø§Ø±ÛŒÙ…ØŸ", items: { icon: 'ğŸŒ', count: 9 }, choices: [{ text: "Û± Û² Û³ Û´ Ûµ Û¶ Û· Û¸ Û¹", isCorrect: true },{ text: "Û± Û² Û³ Ûµ Û´ Û¶ Û¸ Û¹ Û·", isCorrect: false }], correctAnswerText: "Û± Û² Û³ Û´ Ûµ Û¶ Û· Û¸ Û¹" },
            { id: 5, type: 'fill-in-the-blanks', questionTextFarsi: "Ø§Ø³Ø¨â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© Ø±Ø§ Ø¨Ø´Ù…Ø§Ø±ÛŒØ¯. Ø§Ø¹Ø¯Ø§Ø¯ Ø¬Ø§ Ø§ÙØªØ§Ø¯Ù‡ Ø±Ø§ Ø¯Ø± Ú©Ø§Ø¯Ø±Ù‡Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.", items: { icon: 'ğŸ' }, sequence: [1, 2, 3, null, 5, null, 7], correctAnswers: [4, 6]},
            { id: 6, type: 'multiple-choice', questionTextFarsi: "Ú†Ú¯ÙˆÙ†Ù‡ Ú©ÙØ´Ø¯ÙˆØ²Ú©â€ŒÙ‡Ø§ Ø±Ø§ Ù…ÛŒâ€ŒØ´Ù…Ø§Ø±ÛŒÙ…ØŸ", items: { icon: 'ğŸ', count: 4 }, choices: [{ text: "Û² Û³ Û´ Ûµ", isCorrect: false },{ text: "Û± Û² Û³ Û´", isCorrect: true }], correctAnswerText: "Û± Û² Û³ Û´" },
            { id: 7, type: 'fill-in-the-blanks', questionTextFarsi: "Ú¯Ù„â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø´Ù…Ø§Ø±ÛŒØ¯. Ø§Ø¹Ø¯Ø§Ø¯ Ø¬Ø§ Ø§ÙØªØ§Ø¯Ù‡ Ø±Ø§ Ø¯Ø± Ú©Ø§Ø¯Ø±Ù‡Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.", items: { icon: 'ğŸŒ¸' }, sequence: [null, 2, 3, null, 5], correctAnswers: [1, 4]}
        ];
        // ... (Ø¨Ù‚ÛŒÙ‡ Ú©Ø¯ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ Ø§ÙˆÙ„ Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¨Ø§Ù‚ÛŒ Ù…ÛŒ Ù…Ø§Ù†Ø¯) ...
        let currentExercise1Index = 0;
        let correctAnswers1Count = 0;
        const questionText1El = document.getElementById('question-text');
        const mainContentArea1El = document.getElementById('main-content-area');
        const feedbackMessage1El = document.getElementById('feedback-message');
        const checkButton1El = document.getElementById('check-button');
        const nextButton1El = document.getElementById('next-button');
        const progressBar1El = document.getElementById('progress-bar');
        const progressText1El = document.getElementById('progress-text');

        function loadExercise1(index) {
            if (index >= exercises1.length) { showCompletionScreen1(); return; }
            const exercise = exercises1[index];
            questionText1El.textContent = exercise.questionTextFarsi; // Ø§ÛŒÙ† Ø¹Ù†ÙˆØ§Ù† Ø§ØµÙ„ÛŒ Ø³ÙˆØ§Ù„ Ø§Ø³Øª
            mainContentArea1El.innerHTML = ''; 
            feedbackMessage1El.style.display = 'none';
            nextButton1El.disabled = true; checkButton1El.disabled = false;

            if (exercise.type === 'fill-in-the-blanks') {
                exercise.sequence.forEach((seqItem, i) => {
                    const pairContainer = document.createElement('div'); pairContainer.className = 'item-number-pair-container';
                    if (exercise.items && exercise.items.icon) {
                        const itemSpan = document.createElement('span'); itemSpan.className = 'item-image'; itemSpan.textContent = exercise.items.icon;
                        pairContainer.appendChild(itemSpan);
                    }
                    if (seqItem === null) {
                        const input = document.createElement('input'); input.type = 'number';
                        input.className = 'number-box-input input-field'; input.setAttribute('data-input-index', i.toString()); 
                        pairContainer.appendChild(input);
                    } else {
                        const span = document.createElement('span'); span.className = 'number-box'; 
                        span.textContent = seqItem; pairContainer.appendChild(span);
                    }
                    mainContentArea1El.appendChild(pairContainer);
                });
            } else if (exercise.type === 'multiple-choice') {
                // Ø¨Ø±Ø§ÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡ Ø§ÛŒØŒ Ø¹Ù†ÙˆØ§Ù† Ø§ØµÙ„ÛŒ Ø³ÙˆØ§Ù„ (questionTextFarsi) Ø¯Ø± h3 Ø§Ø³Øª
                // ØªØµØ§ÙˆÛŒØ± Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ú¯Ø²ÛŒÙ†Ù‡ Ù‡Ø§ (Ø§Ú¯Ø± Ø¨Ø§Ø´Ù†Ø¯) Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒ Ø´ÙˆÙ†Ø¯
                if (exercise.items && exercise.items.icon && exercise.items.count) {
                     const itemImageContainer = document.createElement('div');
                    itemImageContainer.className = 'flex flex-wrap justify-center mb-3 w-full';
                    if (document.documentElement.dir === 'rtl') { itemImageContainer.style.direction = 'rtl'; }
                    for (let i = 0; i < exercise.items.count; i++) {
                        const itemSpan = document.createElement('span'); itemSpan.className = 'item-image'; 
                        itemSpan.textContent = exercise.items.icon; itemImageContainer.appendChild(itemSpan);
                    }
                    mainContentArea1El.appendChild(itemImageContainer); // ØªØµØ§ÙˆÛŒØ± Ø¢ÛŒØªÙ… Ù‡Ø§ÛŒ Ø³ÙˆØ§Ù„ Ú†Ù†Ø¯ Ú¯Ø²ÛŒÙ†Ù‡ Ø§ÛŒ
                }
               
                const choicesContainer = document.createElement('div'); choicesContainer.className = 'w-full'; 
                exercise.choices.forEach((choice) => {
                    const label = document.createElement('label'); label.className = 'choice-label';
                    const radio = document.createElement('input'); radio.type = 'radio'; radio.name = 'choice';
                    radio.value = choice.text; radio.className = 'ml-2';
                    const textSpan = document.createElement('span');
                    textSpan.innerHTML = `<span class="choice-text-number-sequence">${choice.text}</span>`; 
                    label.appendChild(radio); label.appendChild(textSpan);
                    choicesContainer.appendChild(label);
                });
                mainContentArea1El.appendChild(choicesContainer); // Ú¯Ø²ÛŒÙ†Ù‡ Ù‡Ø§
            }
            updateProgress1();
        }
        function checkAnswer1() {
            const exercise = exercises1[currentExercise1Index]; let isCorrect = false;
            if (exercise.type === 'fill-in-the-blanks') {
                const inputs = mainContentArea1El.querySelectorAll('input.input-field'); let userAnswers = [];
                inputs.forEach(input => { userAnswers.push(input.value !== '' ? parseInt(input.value) : NaN); });
                isCorrect = userAnswers.length === exercise.correctAnswers.length && userAnswers.every((val, idx) => val === exercise.correctAnswers[idx]);
            } else if (exercise.type === 'multiple-choice') {
                const selectedRadio = mainContentArea1El.querySelector('input[name="choice"]:checked');
                if (selectedRadio) { isCorrect = selectedRadio.value === exercise.correctAnswerText; }
            }
            feedbackMessage1El.style.display = 'block';
            if (isCorrect) {
                feedbackMessage1El.textContent = "Ø¹Ø§Ù„ÛŒ! Ù¾Ø§Ø³Ø® Ø´Ù…Ø§ ØµØ­ÛŒØ­ Ø§Ø³Øª."; feedbackMessage1El.className = 'feedback correct';
                nextButton1El.disabled = false; checkButton1El.disabled = true; 
                if (!exercise.answeredCorrectly) { correctAnswers1Count++; exercise.answeredCorrectly = true; }
            } else {
                feedbackMessage1El.textContent = "Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯."; feedbackMessage1El.className = 'feedback incorrect';
            }
            updateProgress1(); 
        }
        function nextExercise1() { currentExercise1Index++; loadExercise1(currentExercise1Index); }
        function updateProgress1() {
            const percentage = exercises1.length > 0 ? (currentExercise1Index / exercises1.length) * 100 : 0;
            progressBar1El.style.width = percentage + '%';
            progressText1El.textContent = currentExercise1Index < exercises1.length ? `ØªÙ…Ø±ÛŒÙ† ${currentExercise1Index + 1} Ø§Ø² ${exercises1.length}` : `ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯!`;
        }
        function showCompletionScreen1() {
            questionText1El.textContent = "ØªØ¨Ø±ÛŒÚ©! Ø´Ù…Ø§ Ø¨Ø®Ø´ Ø§ÙˆÙ„ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ø±Ø¯ÛŒØ¯.";
            mainContentArea1El.innerHTML = `<div class="text-center w-full"><span class="text-5xl">ğŸ‰</span><p class="text-lg mt-2">Ø´Ù…Ø§ Ø¨Ù‡ ${correctAnswers1Count} Ø§Ø² ${exercises1.length} ØªÙ…Ø±ÛŒÙ† Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­ Ø¯Ø§Ø¯ÛŒØ¯.</p></div>`;
            feedbackMessage1El.style.display = 'none'; checkButton1El.style.display = 'none';
            nextButton1El.textContent = "Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯"; nextButton1El.disabled = false;
            nextButton1El.onclick = () => {
                currentExercise1Index = 0; correctAnswers1Count = 0;
                exercises1.forEach(ex => ex.answeredCorrectly = false); 
                checkButton1El.style.display = 'inline-block'; nextButton1El.textContent = "Ø¨Ø¹Ø¯ÛŒ";
                nextButton1El.onclick = nextExercise1; 
                if (exercises1.length > 0) loadExercise1(currentExercise1Index);
            };
            updateProgress1(); 
        }
        if (checkButton1El) checkButton1El.addEventListener('click', checkAnswer1);
        if (nextButton1El) nextButton1El.addEventListener('click', nextExercise1);
        if (exercises1.length > 0) loadExercise1(currentExercise1Index);


        // --- SCRIPT Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ Ø¯ÙˆÙ… ---
        const exercises2 = [
            { id: 1, questionTextFarsi: "Û¹ Ø§Ø³Ø¨ Ø¯Ø± Ø¬Ø¹Ø¨Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.", itemIcon: 'ğŸ', correctCount: 9, itemNameFarsi: "Ø§Ø³Ø¨" },
            { id: 2, questionTextFarsi: "Û´ Ø³Ù†Ø¬Ø§Ø¨ Ø¯Ø± Ø¬Ø¹Ø¨Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.", itemIcon: 'ğŸ¿ï¸', correctCount: 4, itemNameFarsi: "Ø³Ù†Ø¬Ø§Ø¨" },
            { id: 3, questionTextFarsi: "Û³ Ú©ÙˆØ³Ù‡ Ø¯Ø± Ø¬Ø¹Ø¨Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.", itemIcon: 'ğŸ¦ˆ', correctCount: 3, itemNameFarsi: "Ú©ÙˆØ³Ù‡" },
            { id: 4, questionTextFarsi: "Û· Ø¨Ù„ÙˆØ· Ø¯Ø± Ø¬Ø¹Ø¨Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.", itemIcon: 'ğŸŒ°', correctCount: 7, itemNameFarsi: "Ø¨Ù„ÙˆØ·" },
            { id: 5, questionTextFarsi: "Û´ Ø±ÙˆØ¨Ø§Ù‡ Ø¯Ø± Ø¬Ø¹Ø¨Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.", itemIcon: 'ğŸ¦Š', correctCount: 4, itemNameFarsi: "Ø±ÙˆØ¨Ø§Ù‡" },
            { id: 6, questionTextFarsi: "Ûµ Ø³ÛŒØ¨ Ø¯Ø± Ø¬Ø¹Ø¨Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.", itemIcon: 'ğŸ', correctCount: 5, itemNameFarsi: "Ø³ÛŒØ¨" },
            { id: 7, questionTextFarsi: "Û· Ø³Ù†Ø¬Ø§Ø¨ Ø¯ÛŒÚ¯Ø± Ø¯Ø± Ø¬Ø¹Ø¨Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.", itemIcon: 'ğŸ¿ï¸', correctCount: 7, itemNameFarsi: "Ø³Ù†Ø¬Ø§Ø¨" },
        ];
        // ... (Ø¨Ù‚ÛŒÙ‡ Ú©Ø¯ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ Ø¯ÙˆÙ… Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¨Ø§Ù‚ÛŒ Ù…ÛŒ Ù…Ø§Ù†Ø¯) ...
        let currentExercise2Index = 0;
        let correctAnswers2Count = 0;
        const pibQuestionTextEl = document.getElementById('pib-question-text');
        const pibSourceItemAreaEl = document.getElementById('pib-source-item-area');
        const pibTargetBoxAreaEl = document.getElementById('pib-target-box-area');
        const pibFeedbackMessageEl = document.getElementById('pib-feedback-message');
        const pibCheckButtonEl = document.getElementById('pib-check-button');
        const pibSkipButtonEl = document.getElementById('pib-skip-button');
        const pibNextButtonEl = document.getElementById('pib-next-button');
        const pibProgressBarEl = document.getElementById('pib-progress-bar');
        const pibProgressTextEl = document.getElementById('pib-progress-text');

        function handleDragStart(event) {
            event.dataTransfer.setData("text/plain", event.target.textContent);
            event.target.style.opacity = '0.5';
        }
        function handleDragEnd(event) {
            event.target.style.opacity = '1';
        }
        function handleDrop(event) {
            event.preventDefault(); 
            const itemIcon = event.dataTransfer.getData("text/plain");
            if (itemIcon) { 
                const placedItem = document.createElement('div');
                placedItem.className = 'put-in-box-placed-item';
                placedItem.textContent = itemIcon;
                placedItem.onclick = () => { placedItem.remove(); };
                pibTargetBoxAreaEl.appendChild(placedItem);
            }
            if (pibTargetBoxAreaEl) pibTargetBoxAreaEl.classList.remove('drag-over');
        }
        if (pibTargetBoxAreaEl) {
            pibTargetBoxAreaEl.addEventListener('dragenter', (event) => {
                event.preventDefault();
                pibTargetBoxAreaEl.classList.add('drag-over');
            });
            pibTargetBoxAreaEl.addEventListener('dragleave', (event) => {
                if (!pibTargetBoxAreaEl.contains(event.relatedTarget)) {
                    pibTargetBoxAreaEl.classList.remove('drag-over');
                }
            });
        }
        function loadExercise2(index) {
            if (index >= exercises2.length) { showCompletionScreen2(); return; }
            const exercise = exercises2[index];
            if(pibQuestionTextEl) pibQuestionTextEl.textContent = exercise.questionTextFarsi;
            
            if(pibSourceItemAreaEl) pibSourceItemAreaEl.innerHTML = ''; 
            const sourceItem = document.createElement('div');
            sourceItem.className = 'put-in-box-source-item';
            sourceItem.textContent = exercise.itemIcon;
            sourceItem.draggable = true; 
            sourceItem.addEventListener('dragstart', handleDragStart);
            sourceItem.addEventListener('dragend', handleDragEnd);
            sourceItem.title = `Ø§ÛŒÙ† ${exercise.itemNameFarsi} Ø±Ø§ Ø¨Ù‡ Ø¯Ø§Ø®Ù„ Ø¬Ø¹Ø¨Ù‡ Ø¨Ú©Ø´ÛŒØ¯`;
            if(pibSourceItemAreaEl) pibSourceItemAreaEl.appendChild(sourceItem);

            if(pibTargetBoxAreaEl) pibTargetBoxAreaEl.innerHTML = '';

            if(pibFeedbackMessageEl) pibFeedbackMessageEl.style.display = 'none';
            if(pibNextButtonEl) pibNextButtonEl.disabled = true;
            if(pibCheckButtonEl) pibCheckButtonEl.disabled = false;
            if(pibSkipButtonEl) pibSkipButtonEl.disabled = false;
            updateProgress2();
        }
        function checkAnswer2() {
            const exercise = exercises2[currentExercise2Index];
            const currentPlacedItemsCount = pibTargetBoxAreaEl ? pibTargetBoxAreaEl.children.length : 0;
            const isCorrect = currentPlacedItemsCount === exercise.correctCount;

            if(pibFeedbackMessageEl) pibFeedbackMessageEl.style.display = 'block';
            if (isCorrect) {
                if(pibFeedbackMessageEl) {pibFeedbackMessageEl.textContent = "Ø¹Ø§Ù„ÛŒ! Ù¾Ø§Ø³Ø® Ø´Ù…Ø§ ØµØ­ÛŒØ­ Ø§Ø³Øª."; pibFeedbackMessageEl.className = 'feedback correct';}
                if(pibNextButtonEl) pibNextButtonEl.disabled = false;
                if(pibCheckButtonEl) pibCheckButtonEl.disabled = true;
                if(pibSkipButtonEl) pibSkipButtonEl.disabled = true;
                if (!exercise.answeredCorrectly) {
                    correctAnswers2Count++;
                    exercise.answeredCorrectly = true;
                }
            } else {
                 if(pibFeedbackMessageEl) {
                    pibFeedbackMessageEl.textContent = `ØªØ¹Ø¯Ø§Ø¯ ${exercise.itemNameFarsi}â€ŒÙ‡Ø§ ØµØ­ÛŒØ­ Ù†ÛŒØ³Øª. Ø´Ù…Ø§ ${currentPlacedItemsCount} Ø¹Ø¯Ø¯ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯ØŒ Ø¨Ø§ÛŒØ¯ ${exercise.correctCount} Ø¹Ø¯Ø¯ Ø¨Ø§Ø´Ø¯. Ø¨Ø±Ø§ÛŒ Ø§ØµÙ„Ø§Ø­ØŒ Ø±ÙˆÛŒ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø¯Ø± Ø¬Ø¹Ø¨Ù‡ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ØªØ§ Ø­Ø°Ù Ø´ÙˆÙ†Ø¯.`;
                    pibFeedbackMessageEl.className = 'feedback incorrect';
                 }
            }
            updateProgress2();
        }
        function skipExercise2() { currentExercise2Index++; loadExercise2(currentExercise2Index); }
        function nextExercise2() { currentExercise2Index++; loadExercise2(currentExercise2Index); }
        function updateProgress2() {
            const percentage = exercises2.length > 0 ? (currentExercise2Index / exercises2.length) * 100 : 0;
            if(pibProgressBarEl) pibProgressBarEl.style.width = percentage + '%';
            if(pibProgressTextEl) pibProgressTextEl.textContent = currentExercise2Index < exercises2.length ? `ØªÙ…Ø±ÛŒÙ† ${currentExercise2Index + 1} Ø§Ø² ${exercises2.length}` : `ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯!`;
        }
        function showCompletionScreen2() {
            if(pibQuestionTextEl) pibQuestionTextEl.textContent = "ØªØ¨Ø±ÛŒÚ©! Ø´Ù…Ø§ Ø¨Ø®Ø´ Ø¯ÙˆÙ… ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ø±Ø¯ÛŒØ¯.";
            if(pibSourceItemAreaEl) pibSourceItemAreaEl.innerHTML = '';
            if(pibTargetBoxAreaEl) pibTargetBoxAreaEl.innerHTML = `<div class="text-center w-full"><span class="text-5xl">ğŸ‰</span><p class="text-lg mt-2">Ø´Ù…Ø§ Ø¨Ù‡ ${correctAnswers2Count} Ø§Ø² ${exercises2.length} ØªÙ…Ø±ÛŒÙ† Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­ Ø¯Ø§Ø¯ÛŒØ¯.</p></div>`;
            if(pibFeedbackMessageEl) pibFeedbackMessageEl.style.display = 'none';
            if(pibCheckButtonEl) pibCheckButtonEl.style.display = 'none'; 
            if(pibSkipButtonEl) pibSkipButtonEl.style.display = 'none';
            if(pibNextButtonEl) {
                pibNextButtonEl.textContent = "Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯"; pibNextButtonEl.disabled = false;
                pibNextButtonEl.onclick = () => {
                    currentExercise2Index = 0; correctAnswers2Count = 0;
                    exercises2.forEach(ex => ex.answeredCorrectly = false);
                    if(pibCheckButtonEl) pibCheckButtonEl.style.display = 'inline-block'; 
                    if(pibSkipButtonEl) pibSkipButtonEl.style.display = 'inline-block';
                    pibNextButtonEl.textContent = "Ø¨Ø¹Ø¯ÛŒ";
                    pibNextButtonEl.onclick = nextExercise2;
                    if (exercises2.length > 0) loadExercise2(currentExercise2Index);
                };
            }
            updateProgress2();
        }
        if (pibCheckButtonEl) pibCheckButtonEl.addEventListener('click', checkAnswer2);
        if (pibSkipButtonEl) pibSkipButtonEl.addEventListener('click', skipExercise2);
        if (pibNextButtonEl) pibNextButtonEl.addEventListener('click', nextExercise2);
        if (exercises2.length > 0) loadExercise2(currentExercise2Index);


        // --- SCRIPT Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ Ø³ÙˆÙ… (Ù…Ø³Ø§Ø¦Ù„ Ø¯Ø§Ø³ØªØ§Ù†ÛŒ) ---
        const exercises3 = [
            { 
                id: 1, 
                story: [
                    { type: 'text', content: "Ø¢Ø±Ù…ÛŒØªØ§ Ú¯Ù„â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ú†ÛŒØ¯." },
                    { type: 'image', icon: 'ğŸŒ¸', count: 3 },
                    { type: 'text', content: "Ø§Ùˆ Û± Ú¯Ù„ Ø¯ÛŒÚ¯Ø± Ú†ÛŒØ¯." }
                ],
                question: "Ø­Ø§Ù„Ø§ Ø§Ùˆ <span class='story-problem-fill-blank'></span> Ú¯Ù„ Ø¯Ø§Ø±Ø¯.", 
                choices: [
                    { text: "7", isCorrect: false },
                    { text: "4", isCorrect: true },
                    { text: "14", isCorrect: false }
                ],
                correctAnswerValue: "4" // Ù…Ù‚Ø¯Ø§Ø± Ø¹Ø¯Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ù‚Ø§ÛŒØ³Ù‡
            },
            { 
                id: 2, 
                story: [
                    { type: 'text', content: "Ø¢Ø±Ø´Ø§Ù… Û² Ù‡Ø§Øªâ€ŒØ¯Ø§Ú¯ Ø¯Ø±Ø³Øª Ú©Ø±Ø¯." },
                    { type: 'image', icon: 'ğŸŒ­', count: 2, initial: true }, // ØªØµÙˆÛŒØ± Ø§ÙˆÙ„ÛŒÙ‡
                    { type: 'text', content: "Ø§Ùˆ Û± Ù‡Ø§Øªâ€ŒØ¯Ø§Ú¯ Ø¯ÛŒÚ¯Ø± Ø¯Ø±Ø³Øª Ú©Ø±Ø¯." }
                ],
                question: "Ø¢Ø±Ø´Ø§Ù… Ú†Ù†Ø¯ Ù‡Ø§Øªâ€ŒØ¯Ø§Ú¯ Ø¯Ø±Ø³Øª Ú©Ø±Ø¯ØŸ", 
                choices: [ // Ú¯Ø²ÛŒÙ†Ù‡ Ù‡Ø§ Ø´Ø§Ù…Ù„ ØªØµÙˆÛŒØ± Ù‡Ø³ØªÙ†Ø¯
                    { text: "", icons: ['ğŸŒ­','ğŸŒ­','ğŸŒ­'], isCorrect: true, choiceValue: "3" }, // 3 hotdogs
                    { text: "", icons: ['ğŸŒ­'], isCorrect: false, choiceValue: "1" },           // 1 hotdog
                    { text: "", icons: ['ğŸŒ­','ğŸŒ­','ğŸŒ­','ğŸŒ­','ğŸŒ­'], isCorrect: false, choiceValue: "5" } // 5 hotdogs
                ],
                correctAnswerValue: "3"
            },
            { 
                id: 3, 
                story: [
                    { type: 'text', content: "Ø§Ø±Ù…ÛŒØ§ Û±Û· Ø³Ù†Ø¬Ø§Ø¨ Ø¯ÛŒØ¯." },
                    { type: 'image', icon: 'ğŸ¿ï¸', count: 17 },
                    { type: 'text', content: "ÛŒÚ© Ø³Ù†Ø¬Ø§Ø¨ ÙØ±Ø§Ø± Ú©Ø±Ø¯." }
                ],
                question: "Ú†Ù†Ø¯ Ø³Ù†Ø¬Ø§Ø¨ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡ Ø§Ø³ØªØŸ", 
                choices: [
                    { text: "16", isCorrect: true },
                    { text: "7", isCorrect: false },
                    { text: "14", isCorrect: false }
                ],
                correctAnswerValue: "16"
            },
             { 
                id: 4, 
                story: [
                    { type: 'text', content: "Ø¨Ø§Ø±Ø§Ù†Ø§ Û±Û¶ Ø¨Ù„ÙˆØ· Ø¯ÛŒØ¯." },
                    // { type: 'image', icon: 'ğŸŒ°', count: 16 }, // ØªØµÙˆÛŒØ± Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ØªÙ…Ø±ÛŒÙ† Ø¯Ø± ÙØ§ÛŒÙ„ Ù†Ø¨ÙˆØ¯
                    { type: 'text', content: "ÛŒÚ© Ø¨Ù„ÙˆØ· ØºÙ„ØªÛŒØ¯ Ùˆ Ø±ÙØª." }
                ],
                question: "Ú†Ù†Ø¯ Ø¨Ù„ÙˆØ· Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡ Ø§Ø³ØªØŸ", 
                choices: [
                    { text: "15", isCorrect: true },
                    { text: "19", isCorrect: false },
                    { text: "12", isCorrect: false }
                ],
                correctAnswerValue: "15"
            },
            { 
                id: 5, 
                story: [
                    { type: 'text', content: "Ø¨Ø§Øº ÙˆØ­Ø´ Ù…ÛŒÙ…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¯Ø§Ø´Øª." },
                    { type: 'image', icon: 'ğŸ’', count: 7 },
                    { type: 'text', content: "Ø¨Ø§Øº ÙˆØ­Ø´ Û± Ù…ÛŒÙ…ÙˆÙ† Ø¯ÛŒÚ¯Ø± Ú¯Ø±ÙØª." }
                ],
                question: "Ø­Ø§Ù„Ø§ <span class='story-problem-fill-blank'></span> Ù…ÛŒÙ…ÙˆÙ† Ø¯Ø± Ø¨Ø§Øº ÙˆØ­Ø´ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.", 
                choices: [
                    { text: "8", isCorrect: true },
                    { text: "15", isCorrect: false },
                    { text: "2", isCorrect: false }
                ],
                correctAnswerValue: "8"
            },
             { 
                id: 6, 
                story: [
                    { type: 'text', content: "Ø³Ú¯ Ú¯Ù„Ù‡ Û±Û± Ø§Ø³ØªØ®ÙˆØ§Ù† Ø¯Ø§Ø´Øª." },
                    { type: 'image', icon: 'ğŸ¦´', count: 11, initial: true },
                    { type: 'text', content: "Ø§Ùˆ ÛŒÚ©ÛŒ Ø±Ø§ Ø®ÙˆØ±Ø¯." }
                ],
                question: "Ú†Ù†Ø¯ Ø§Ø³ØªØ®ÙˆØ§Ù† Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡ Ø§Ø³ØªØŸ", 
                choices: [ 
                    { text: "", icons: Array(10).fill('ğŸ¦´'), isCorrect: true, choiceValue: "10" }, // 10 bones
                    { text: "", icons: Array(12).fill('ğŸ¦´'), isCorrect: false, choiceValue: "12" },// 12 bones
                    { text: "", icons: Array(11).fill('ğŸ¦´'), isCorrect: false, choiceValue: "11" } // 11 bones
                ],
                correctAnswerValue: "10"
            },
            { 
                id: 7, 
                story: [
                    { type: 'text', content: "Ø§Ù‡ÙˆØ±Ø§ Û±Û± Ú©ÙˆØ³Ù‡ Ø¯ÛŒØ¯." },
                    { type: 'image', icon: 'ğŸ¦ˆ', count: 11 },
                    { type: 'text', content: "Ø³Ù¾Ø³ Ø§Ùˆ Û± Ú©ÙˆØ³Ù‡ Ø¯ÛŒÚ¯Ø± Ø¯ÛŒØ¯." }
                ],
                question: "Ø§Ù‡ÙˆØ±Ø§ <span class='story-problem-fill-blank'></span> Ú©ÙˆØ³Ù‡ Ø¯ÛŒØ¯.", 
                choices: [
                    { text: "13", isCorrect: false },
                    { text: "7", isCorrect: false },
                    { text: "12", isCorrect: true }
                ],
                correctAnswerValue: "12"
            }
        ];

        let currentExercise3Index = 0;
        let correctAnswers3Count = 0;

        const spStoryTextAreaEl = document.getElementById('sp-story-text-area');
        const spQuestionAreaEl = document.getElementById('sp-question-area');
        const spChoicesAreaEl = document.getElementById('sp-choices-area');
        const spFeedbackMessageEl = document.getElementById('sp-feedback-message');
        const spCheckButtonEl = document.getElementById('sp-check-button');
        const spSkipButtonEl = document.getElementById('sp-skip-button');
        const spNextButtonEl = document.getElementById('sp-next-button');
        const spProgressBarEl = document.getElementById('sp-progress-bar');
        const spProgressTextEl = document.getElementById('sp-progress-text');

        function loadExercise3(index) {
            if (index >= exercises3.length) {
                showCompletionScreen3();
                return;
            }
            const exercise = exercises3[index];

            spStoryTextAreaEl.innerHTML = '';
            exercise.story.forEach(part => {
                if (part.type === 'text') {
                    const p = document.createElement('p');
                    p.className = 'story-problem-text';
                    p.innerHTML = part.content; 
                    spStoryTextAreaEl.appendChild(p);
                } else if (part.type === 'image') {
                    const imgContainer = document.createElement('div');
                    imgContainer.className = 'story-problem-image-container';
                    for (let i = 0; i < part.count; i++) {
                        const itemSpan = document.createElement('span');
                        itemSpan.className = 'item-image'; 
                        itemSpan.textContent = part.icon;
                        imgContainer.appendChild(itemSpan);
                    }
                    spStoryTextAreaEl.appendChild(imgContainer);
                }
            });

            spQuestionAreaEl.innerHTML = `<p class="story-problem-question">${exercise.question}</p>`;
            
            spChoicesAreaEl.innerHTML = '';
            exercise.choices.forEach(choice => {
                const label = document.createElement('label');
                label.className = 'choice-label';
                
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'sp-choice';
                radio.value = choice.choiceValue !== undefined ? choice.choiceValue : choice.text; 

                const textSpan = document.createElement('span');
                if (choice.icons && choice.icons.length > 0) { 
                    choice.icons.forEach(icon => {
                        const iconSpan = document.createElement('span');
                        iconSpan.className = 'item-image'; 
                        iconSpan.style.margin = '0 2px'; 
                        iconSpan.textContent = icon;
                        textSpan.appendChild(iconSpan);
                    });
                } else {
                    textSpan.innerHTML = `<span class="choice-text-number-sequence">${choice.text}</span>`;
                }
                
                label.appendChild(radio);
                label.appendChild(textSpan);
                spChoicesAreaEl.appendChild(label);
            });

            spFeedbackMessageEl.style.display = 'none';
            spNextButtonEl.disabled = true;
            spCheckButtonEl.disabled = false;
            spSkipButtonEl.disabled = false;
            updateProgress3();
        }

        function checkAnswer3() {
            const exercise = exercises3[currentExercise3Index];
            const selectedRadio = document.querySelector('input[name="sp-choice"]:checked');
            let isCorrect = false;

            if (selectedRadio) {
                isCorrect = selectedRadio.value === exercise.correctAnswerValue;
            }

            spFeedbackMessageEl.style.display = 'block';
            if (isCorrect) {
                spFeedbackMessageEl.textContent = "Ø¹Ø§Ù„ÛŒ! Ù¾Ø§Ø³Ø® Ø´Ù…Ø§ ØµØ­ÛŒØ­ Ø§Ø³Øª.";
                spFeedbackMessageEl.className = 'feedback correct';
                spNextButtonEl.disabled = false;
                spCheckButtonEl.disabled = true;
                spSkipButtonEl.disabled = true;
                if (!exercise.answeredCorrectly) {
                    correctAnswers3Count++;
                    exercise.answeredCorrectly = true;
                }
            } else {
                spFeedbackMessageEl.textContent = "Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯. Ù¾Ø§Ø³Ø® Ø´Ù…Ø§ Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³Øª.";
                spFeedbackMessageEl.className = 'feedback incorrect';
            }
            updateProgress3();
        }

        function skipExercise3() {
            currentExercise3Index++;
            loadExercise3(currentExercise3Index);
        }
        function nextExercise3() {
            currentExercise3Index++;
            loadExercise3(currentExercise3Index);
        }

        function updateProgress3() {
            const percentage = exercises3.length > 0 ? (currentExercise3Index / exercises3.length) * 100 : 0;
            spProgressBarEl.style.width = percentage + '%';
            spProgressTextEl.textContent = currentExercise3Index < exercises3.length ? `ØªÙ…Ø±ÛŒÙ† ${currentExercise3Index + 1} Ø§Ø² ${exercises3.length}` : `ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯!`;
        }

        function showCompletionScreen3() {
            spStoryTextAreaEl.innerHTML = '';
            spQuestionAreaEl.innerHTML = `<div class="text-center w-full"><p class="text-xl font-semibold">ØªØ¨Ø±ÛŒÚ©! Ø´Ù…Ø§ Ø¨Ø®Ø´ Ø³ÙˆÙ… ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ø±Ø¯ÛŒØ¯.</p><span class="text-5xl mt-2 inline-block">ğŸ‰</span><p class="text-lg mt-2">Ø´Ù…Ø§ Ø¨Ù‡ ${correctAnswers3Count} Ø§Ø² ${exercises3.length} ØªÙ…Ø±ÛŒÙ† Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­ Ø¯Ø§Ø¯ÛŒØ¯.</p></div>`;
            spChoicesAreaEl.innerHTML = '';
            spFeedbackMessageEl.style.display = 'none';
            spCheckButtonEl.style.display = 'none';
            spSkipButtonEl.style.display = 'none';
            spNextButtonEl.textContent = "Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯";
            spNextButtonEl.disabled = false;
            spNextButtonEl.onclick = () => {
                currentExercise3Index = 0;
                correctAnswers3Count = 0;
                exercises3.forEach(ex => ex.answeredCorrectly = false);
                spCheckButtonEl.style.display = 'inline-block';
                spSkipButtonEl.style.display = 'inline-block';
                spNextButtonEl.textContent = "Ø¨Ø¹Ø¯ÛŒ";
                spNextButtonEl.onclick = nextExercise3;
                if (exercises3.length > 0) loadExercise3(currentExercise3Index);
            };
            updateProgress3();
        }

        if(spCheckButtonEl) spCheckButtonEl.addEventListener('click', checkAnswer3);
        if(spSkipButtonEl) spSkipButtonEl.addEventListener('click', skipExercise3);
        if(spNextButtonEl) spNextButtonEl.addEventListener('click', nextExercise3);
        if (exercises3.length > 0) loadExercise3(currentExercise3Index);


    </script>

    
</div>



</body>
</html>
